<div class="card project-resources">
  <div class="card-header">
    <strong>Resources</strong>
  </div>
  <div class="list-group list-group-flush">
    <% if project.resources.present? %>
      <% project.resources.each do |r| %>
        <div class="list-group-item">
          <p class="d-flex align-items-center">
            <%= resource_icon(r) %>
            <span class="font-weight-light">
              <%= r.classification %>
            </span>
            <%= tag.span(r.status, class: "badge badge-#{resource_status_class(r.status)} ml-auto") %>
          </p>

          <h5 class="text-primary">
            <%= r.name %>
          </h5>

          <% unless r.pending? %>
            <p>
              <%- case r -%>
              <%- when Resources::CodeRepo -%>
                <%= r.private ? 'Private' : 'Public' %><br />
                <%= link_to r.full_name, r.url, target: '_blank' %>
              <%- when Resources::DockerRepo -%>
                <%= r.visibility.try(:capitalize) %><br />
                <%= r.base_uri %>
              <%- when Resources::KubeNamespace -%>
              <%- end -%>
            </p>

            <div>
              <div class="btn-group float-right" role="group" aria-label="Resource actions">
                <button id="resource<%= r.id -%>ActionsGroupDropdown" type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Actions
                </button>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="resource<%= r.id -%>ActionsGroupDropdown">
                  <%= delete_resource_link project, r, css_class: 'dropdown-item' %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      <%- end -%>
    <% else %>
      <li class="list-group-item text-center">
        <span class="none-text mt-2 inline-block">
          No resources yet
        </span>

        <br />
        <br />

        <%=
          link_to 'Provision a new set of resources',
            provision_project_resources_path(@project),
            method: :post,
            class: 'btn btn-primary',
            role: 'button'
        %>
      </li>
    <% end %>
  </div>
</div>

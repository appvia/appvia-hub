<% if property_spec['items']['type'] == 'object' %>

  <%=
    render(
      'application/forms/json_schema/fields_nested_object',
      form: form,
      name: name,
      spec: property_spec['items'],
      current: item,
      is_array: true
    ) do
  %>
    <div>
      <%= link_to "Remove", "#", class: "btn btn-sm btn-outline-primary", data: { action: "click->form-nested-list#remove" } %>
    </div>
  <% end %>

<% else %>

  <% current = item.is_a?(String) ? item : '' %>
  <%=
    render(
      'application/forms/json_schema/fields_nested_field',
      form: form,
      name: name,
      spec: property_spec['items'],
      current: current,
      multiple: true
    ) do
  %>
    <div>
      <%= link_to "Remove", "#", class: "btn btn-sm btn-outline-primary", data: { action: "click->form-nested-list#remove" } %>
    </div>
  <% end %>

<% end %>

<% value = current_value.nil? ? property_spec['default'] : current_value %>

<% help_text = json_schema_field_help_text property_spec %>

<%- case property_spec['type'] -%>
<%- when 'boolean' -%>
  <% include_blank = local_assigns.fetch :include_blank, true %>
  <%=
    form.select name,
      [true, false],
      {
        value: value,
        selected: value,
        required: is_required,
        label: label_with_tooltip(
          config_field_title(name, property_spec),
          property_spec['description']
        ),
        include_blank: include_blank,
        help: help_text
      },
      { class: 'selectpicker' }
  %>
<%- when 'integer'  %>
  <%=
    form.number_field name,
      value: value,
      required: is_required,
      label: label_with_tooltip(
        config_field_title(name, property_spec),
        property_spec['description']
      ),
      pattern: property_spec['pattern'],
      help: help_text
  %>
<%- else -%>
  <%=
    form.text_field name,
      value: value,
      required: is_required,
      label: label_with_tooltip(
        config_field_title(name, property_spec),
        property_spec['description']
      ),
      pattern: property_spec['pattern'],
      help: help_text
  %>
<%- end -%>
